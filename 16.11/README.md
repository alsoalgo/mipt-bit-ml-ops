# Домашнее задание #1

## Задание.

ДЗ-1: Python пакет с биндингами

Данное домашнее задание покрывает следующие темы:
- Python bindings
- Python packaging
- Docker
  
Вам предстоит написать совсем немного кода на С++, обернуть в pybind, собрать python пакет, протестировать в docker. Эту задачу стоит декомпозировать на несколько шагов:
1. Step-1 [2 балла]: Функция на C++
Каждому предстоит выбрать свою тему тут: https://docs.google.com/spreadsheets/d/1Cb834Zyeg2NrO88KShiEpOXpqd0kZJSDzkfPMZl6_4Y/edit?usp=sharing

2. Step-2 [2 балла]: Pybind, cmake
Далее используя pybind (пример) указываете какие функции будут доступны в качестве биндингов. Затем пишите Makefile в котором указываете команды для компиляции c++ кода (пример)

3. Step-3 [3 балла]: Подготовка пакета
Вам понадобится написать pyproject.toml с минимальной необходимой секцией [build-system], а затем подготовить setup.py

4. Step-4 [3 балла]: Установка пакета
Командой python3 -m build получаем .whl файл, затем устанавливаем его через pip install <path to .whl>

5. Step-5 [1 балл]: Проверка работоспособности
Подготовьте короткий скрипт с тестами, которые сравнивали бы результаты ваших биндингов и эталонных реализаций из каких-либо библиотек.

Шаг 4 должен выполняться внутри Dockerfile; Шаг 5 - внутри запущенного докер-контейнера полученного на шаге 4.

Итоговая оценка за задание - сумма баллов от первого пункта до последнего выполненного без пропусков (то есть если например выполнены пункты 1,3,4,5 то зачитывается только пункт 1).

## Решение.

###  Описание скриптов.

#### run.sh

Скрипт собирает и запускает docker-контейнер с установленным python пакетом.
Затем запускает тесты.

#### clean.sh

Скрипт удаляет docker-контейнер и образ.

### Запуск.

Из данной директории запустите скрипт run.sh:

```bash 
./run.sh
```

Дождитесь окончания выполнения скрипта.

Удалите docker-контейнер и образ:

```bash
./clean.sh
```

### Результаты. (пример вывода)

```bash
Check for vector: [1.0, 2.0, 3.0, 4.0]
cumsum(vec) must be: [ 1.  3.  6. 10.]
-------------------
Simple test passed!
-------------------
numpy cumsum, size=10000: 0.00032 seconds
binding cumsum, size=10000: 0.00035 seconds
-------------------
numpy cumsum, size=100000: 0.00564 seconds
binding cumsum, size=100000: 0.00413 seconds
-------------------
numpy cumsum, size=200000: 0.00552 seconds
binding cumsum, size=200000: 0.00805 seconds
-------------------
numpy cumsum, size=1000000: 0.03421 seconds
binding cumsum, size=1000000: 0.04717 seconds
-------------------
numpy cumsum, size=10000000: 0.3009 seconds
binding cumsum, size=10000000: 0.69843 seconds
-------------------
Timings passed!
```

